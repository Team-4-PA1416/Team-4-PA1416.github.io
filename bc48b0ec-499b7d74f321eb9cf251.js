"use strict";(self.webpackChunksafe_parasport=self.webpackChunksafe_parasport||[]).push([[740],{7823:function(t,e,n){n.d(e,{ML:function(){return je},hj:function(){return E},vc:function(){return Te},NB:function(){return Ce},DK:function(){return Ae},nU:function(){return M},Nl:function(){return S},EG:function(){return $e},hT:function(){return q},Cf:function(){return Be},K9:function(){return De},P1:function(){return be},x2:function(){return ze},pr:function(){return Ie},zK:function(){return Ne},S0:function(){return Ze}});var r=n(7326),o=n(136),i=n(2963),a=n(1120),s=n(2982),u=n(885),c=n(5671),d=n(3144),f=n(4942),l=(n(8559),n(3728),n(4944),n(3792),n(471)),p=n(6157),h=n(2970),m=n(1929),v=n(3357),g=n(20),y=n(8627);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var o=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function O(t,e){var n=_({},t);return w(t)&&w(e)&&Object.keys(e).forEach((function(r){w(e[r])&&r in t?n[r]=O(t[r],e[r]):Object.assign(n,(0,f.Z)({},r,e[r]))})),n}function x(t){return"function"==typeof t}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(x(t)){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e?t.bind(e).apply(void 0,r):t.apply(void 0,r)}return t}function S(t,e,n){return void 0===t.config[e]&&t.parent?S(t.parent,e,n):"function"==typeof t.config[e]?t.config[e].bind(_(_({},n),{},{parent:t.parent?S(t.parent,e,n):null})):t.config[e]}var E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)(this,t),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=_(_({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(S(this,"addOptions",{name:this.name}))),this.storage=M(S(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=O(this.options,t),e.storage=M(S(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=M(S(n,"addOptions",{name:n.name})),n.storage=M(S(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}();function j(t,e,n){var r=e.from,o=e.to,i=n||{},a=i.blockSeparator,s=void 0===a?"\n\n":a,u=i.textSerializers,c=void 0===u?{}:u,d="",f=!0;return t.nodesBetween(r,o,(function(t,e,n,i){var a,u=null==c?void 0:c[t.type.name];u?(t.isBlock&&!f&&(d+=s,f=!0),d+=u({node:t,pos:e,parent:n,index:i})):t.isText?(d+=null===(a=null==t?void 0:t.text)||void 0===a?void 0:a.slice(Math.max(r,e)-e,o-e),f=!1):t.isBlock&&!f&&(d+=s,f=!0)})),d}function C(t){return Object.fromEntries(Object.entries(t.nodes).filter((function(t){return(0,u.Z)(t,2)[1].spec.toText})).map((function(t){var e=(0,u.Z)(t,2);return[e[0],e[1].spec.toText]})))}var T=E.create({name:"clipboardTextSerializer",addProseMirrorPlugins:function(){var t=this;return[new l.Sy({key:new l.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var e=t.editor,n=e.state,r=e.schema,o=n.doc,i=n.selection.ranges,a=Math.min.apply(Math,(0,s.Z)(i.map((function(t){return t.$from.pos})))),u=Math.max.apply(Math,(0,s.Z)(i.map((function(t){return t.$to.pos}))));return j(o,{from:a,to:u},{textSerializers:C(r)})}}})]}}),A=Object.freeze({__proto__:null,blur:function(){return function(t){var e=t.editor,n=t.view;return requestAnimationFrame((function(){var t;e.isDestroyed||(n.dom.blur(),null===(t=null===window||void 0===window?void 0:window.getSelection())||void 0===t||t.removeAllRanges())})),!0}}}),z=Object.freeze({__proto__:null,clearContent:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return e.commands.setContent("",t)}}}),P=Object.freeze({__proto__:null,clearNodes:function(){return function(t){var e=t.state,n=t.tr,r=t.dispatch,o=n.selection.ranges;return!r||(o.forEach((function(t){var r=t.$from,o=t.$to;e.doc.nodesBetween(r.pos,o.pos,(function(t,e){if(!t.type.isText){var r=n.doc,o=n.mapping,i=r.resolve(o.map(e)),a=r.resolve(o.map(e+t.nodeSize)),s=i.blockRange(a);if(s){var u=(0,p.k9)(s);if(t.type.isTextblock){var c=i.parent.contentMatchAt(i.index()).defaultType;n.setNodeMarkup(s.start,c)}(u||0===u)&&n.lift(s,u)}}}))})),!0)}}}),B=Object.freeze({__proto__:null,command:function(t){return function(e){return t(e)}}}),N=Object.freeze({__proto__:null,createParagraphNear:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.mD)(e,n)}}});function Z(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error("There is no node type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.nodes[t]}return t}var D=Object.freeze({__proto__:null,deleteNode:function(t){return function(e){for(var n=e.tr,r=e.state,o=e.dispatch,i=Z(t,r.schema),a=n.selection.$anchor,s=a.depth;s>0;s-=1){if(a.node(s).type===i){if(o){var u=a.before(s),c=a.after(s);n.delete(u,c).scrollIntoView()}return!0}}return!1}}}),$=Object.freeze({__proto__:null,deleteRange:function(t){return function(e){var n=e.tr,r=e.dispatch,o=t.from,i=t.to;return r&&n.delete(o,i),!0}}}),I=Object.freeze({__proto__:null,deleteSelection:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.NE)(e,n)}}}),R=Object.freeze({__proto__:null,enter:function(){return function(t){return t.commands.keyboardShortcut("Enter")}}}),H=Object.freeze({__proto__:null,exitCode:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.uo)(e,n)}}});function L(t,e){if("string"==typeof t){if(!e.marks[t])throw Error("There is no mark type named '".concat(t,"'. Maybe you forgot to add the extension?"));return e.marks[t]}return t}function F(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function K(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(e);return!r.length||r.every((function(r){return n.strict?e[r]===t[r]:F(e[r])?e[r].test(t[r]):e[r]===t[r]}))}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.find((function(t){return t.type===e&&K(t.attrs,n)}))}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!V(t,e,n)}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){var r=t.parent.childAfter(t.parentOffset);if(r.node){var o=V(r.node.marks,e,n);if(o){var i=t.index(),a=t.start()+r.offset,s=i+1,u=a+r.node.nodeSize;for(V(r.node.marks,e,n);i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,a-=t.parent.child(i).nodeSize;for(;s<t.parent.childCount&&W(t.parent.child(s).marks,e,n);)u+=t.parent.child(s).nodeSize,s+=1;return{from:a,to:u}}}}}var G=Object.freeze({__proto__:null,extendMarkRange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=L(t,o.schema),s=r.doc,u=r.selection,c=u.$from,d=u.from,f=u.to;if(i){var p=U(c,a,e);if(p&&p.from<=d&&p.to>=f){var h=l.Bs.create(s,p.from,p.to);r.setSelection(h)}}return!0}}}),Y=Object.freeze({__proto__:null,first:function(t){return function(e){for(var n="function"==typeof t?t(e):t,r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1}}});function J(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!function(t){var e;return"class"===(null===(e=t.constructor)||void 0===e?void 0:e.toString().substring(0,5))}(t)}function q(t){return J(t)&&t instanceof l.Bs}function X(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(t,e),n)}function tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;var n=l.Y1.atStart(t),r=l.Y1.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return r;var o=n.from,i=r.to;return"all"===e?l.Bs.create(t,Q(0,o,i),Q(t.content.size,o,i)):l.Bs.create(t,Q(e,o,i),Q(e,o,i))}var et=Object.freeze({__proto__:null,focus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return function(n){var r=n.editor,o=n.view,i=n.tr,a=n.dispatch;e=_({scrollIntoView:!0},e);var s=function(){X()&&o.dom.focus(),requestAnimationFrame((function(){r.isDestroyed||(o.focus(),(null==e?void 0:e.scrollIntoView)&&r.commands.scrollIntoView())}))};if(o.hasFocus()&&null===t||!1===t)return!0;if(a&&null===t&&!q(r.state.selection))return s(),!0;var u=tt(r.state.doc,t)||r.state.selection,c=r.state.selection.eq(u);return a&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0}}}),nt=Object.freeze({__proto__:null,forEach:function(t,e){return function(n){return t.every((function(t,r){return e(t,_(_({},n),{},{index:r}))}))}}}),rt=Object.freeze({__proto__:null,insertContent:function(t,e){return function(n){var r=n.tr;return n.commands.insertContentAt({from:r.selection.from,to:r.selection.to},t,e)}}});function ot(t){var e="<body>".concat(t,"</body>");return(new window.DOMParser).parseFromString(e,"text/html").body}function it(t,e,n){if(n=_({slice:!0,parseOptions:{}},n),"object"==typeof t&&null!==t)try{return Array.isArray(t)?m.HY.fromArray(t.map((function(t){return e.nodeFromJSON(t)}))):e.nodeFromJSON(t)}catch(o){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),it("",e,n)}if("string"==typeof t){var r=m.aw.fromSchema(e);return n.slice?r.parseSlice(ot(t),n.parseOptions).content:r.parse(ot(t),n.parseOptions)}return it("",e,n)}var at=Object.freeze({__proto__:null,insertContentAt:function(t,e,n){return function(r){var o=r.tr,i=r.dispatch,a=r.editor;if(i){n=_({parseOptions:{},updateSelection:!0},n);var s=it(e,a.schema,{parseOptions:_({preserveWhitespace:"full"},n.parseOptions)});if("<>"===s.toString())return!0;var u="number"==typeof t?{from:t,to:t}:t,c=u.from,d=u.to,f=!0,h=!0;if((s.toString().startsWith("<")?s:[s]).forEach((function(t){t.check(),f=!!f&&(t.isText&&0===t.marks.length),h=!!h&&t.isBlock})),c===d&&h){var m=o.doc.resolve(c).parent;m.isTextblock&&!m.type.spec.code&&!m.childCount&&(c-=1,d+=1)}f?o.insertText(e,c,d):o.replaceWith(c,d,s),n.updateSelection&&function(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o=t.steps[r];if(o instanceof p.Pu||o instanceof p.FC){var i=t.mapping.maps[r],a=0;i.forEach((function(t,e,n,r){0===a&&(a=r)})),t.setSelection(l.Y1.near(t.doc.resolve(a),n))}}}(o,o.steps.length-1,-1)}return!0}}}),st=Object.freeze({__proto__:null,joinBackward:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.al)(e,n)}}}),ut=Object.freeze({__proto__:null,joinForward:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.Y_)(e,n)}}});function ct(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var dt=Object.freeze({__proto__:null,keyboardShortcut:function(t){return function(e){var n=e.editor,r=e.view,o=e.tr,i=e.dispatch,a=function(t){var e,n,r,o,i=t.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(var s=0;s<i.length-1;s+=1){var u=i[s];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))e=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))r=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: ".concat(u));X()||ct()?o=!0:n=!0}}return e&&(a="Alt-".concat(a)),n&&(a="Ctrl-".concat(a)),o&&(a="Meta-".concat(a)),r&&(a="Shift-".concat(a)),a}(t).split(/-(?!$)/),s=a.find((function(t){return!["Alt","Ctrl","Meta","Shift"].includes(t)})),u=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((function(){r.someProp("handleKeyDown",(function(t){return t(r,u)}))}));return null==c||c.steps.forEach((function(t){var e=t.map(o.mapping);e&&i&&o.maybeStep(e)})),!0}}});function ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.from,i=r.to,a=r.empty,s=e?Z(e,t.schema):null,u=[];t.doc.nodesBetween(o,i,(function(t,e){if(!t.isText){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);u.push({node:t,from:n,to:r})}}));var c=i-o,d=u.filter((function(t){return!s||s.name===t.node.type.name})).filter((function(t){return K(t.node.attrs,n,{strict:!1})}));if(a)return!!d.length;var f=d.reduce((function(t,e){return t+e.to-e.from}),0);return f>=c}var lt=Object.freeze({__proto__:null,lift:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch;return!!ft(r,Z(t,r.schema),e)&&(0,h.xb)(r,o)}}}),pt=Object.freeze({__proto__:null,liftEmptyBlock:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.X0)(e,n)}}}),ht=Object.freeze({__proto__:null,liftListItem:function(t){return function(e){var n=e.state,r=e.dispatch,o=Z(t,n.schema);return(0,v.IB)(o)(n,r)}}}),mt=Object.freeze({__proto__:null,newlineInCode:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.QK)(e,n)}}});function vt(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function gt(t,e){var n="string"==typeof e?[e]:e;return Object.keys(t).reduce((function(e,r){return n.includes(r)||(e[r]=t[r]),e}),{})}var yt=Object.freeze({__proto__:null,resetAttributes:function(t,e){return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=vt("string"==typeof t?t:t.name,o.schema);return!!u&&("node"===u&&(a=Z(t,o.schema)),"mark"===u&&(s=L(t,o.schema)),i&&r.selection.ranges.forEach((function(t){o.doc.nodesBetween(t.$from.pos,t.$to.pos,(function(t,n){a&&a===t.type&&r.setNodeMarkup(n,void 0,gt(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((function(o){s===o.type&&r.addMark(n,n+t.nodeSize,s.create(gt(o.attrs,e)))}))}))})),!0)}}}),bt=Object.freeze({__proto__:null,scrollIntoView:function(){return function(t){var e=t.tr;return t.dispatch&&e.scrollIntoView(),!0}}}),kt=Object.freeze({__proto__:null,selectAll:function(){return function(t){var e=t.tr;return t.commands.setTextSelection({from:0,to:e.doc.content.size})}}}),_t=Object.freeze({__proto__:null,selectNodeBackward:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h._M)(e,n)}}}),wt=Object.freeze({__proto__:null,selectNodeForward:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.o)(e,n)}}}),Ot=Object.freeze({__proto__:null,selectParentNode:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.N0)(e,n)}}}),xt=Object.freeze({__proto__:null,selectTextblockEnd:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.nw)(e,n)}}}),Mt=Object.freeze({__proto__:null,selectTextblockStart:function(){return function(t){var e=t.state,n=t.dispatch;return(0,h.U9)(e,n)}}});function St(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(t,e,{slice:!1,parseOptions:n})}var Et=Object.freeze({__proto__:null,setContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.tr,i=r.editor,a=r.dispatch,s=o.doc,u=St(t,i.schema,n),c=l.Bs.create(s,0,s.content.size);return a&&o.setSelection(c).replaceSelectionWith(u,!1).setMeta("preventUpdate",!e),!0}}});function jt(t,e){var n=L(e,t.schema),r=t.selection,o=r.from,i=r.to,a=r.empty,u=[];a?(t.storedMarks&&u.push.apply(u,(0,s.Z)(t.storedMarks)),u.push.apply(u,(0,s.Z)(t.selection.$head.marks()))):t.doc.nodesBetween(o,i,(function(t){u.push.apply(u,(0,s.Z)(t.marks))}));var c=u.find((function(t){return t.type.name===n.name}));return c?_({},c.attrs):{}}var Ct=Object.freeze({__proto__:null,setMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=r.selection,s=a.empty,u=a.ranges,c=L(t,o.schema);if(i)if(s){var d=jt(o,c);r.addStoredMark(c.create(_(_({},d),e)))}else u.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){var a=Math.max(o,n),s=Math.min(o+t.nodeSize,i);t.marks.find((function(t){return t.type===c}))?t.marks.forEach((function(t){c===t.type&&r.addMark(a,s,c.create(_(_({},t.attrs),e)))})):r.addMark(a,s,c.create(e))}))}));return!0}}}),Tt=Object.freeze({__proto__:null,setMeta:function(t,e){return function(n){return n.tr.setMeta(t,e),!0}}}),At=Object.freeze({__proto__:null,setNode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch,i=n.chain,a=Z(t,r.schema);return a.isTextblock?i().command((function(t){var n=t.commands;return!!(0,h.uJ)(a,e)(r)||n.clearNodes()})).command((function(t){var n=t.state;return(0,h.uJ)(a,e)(n,o)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}}}),zt=Object.freeze({__proto__:null,setNodeSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o=l.Y1.atStart(r).from,i=l.Y1.atEnd(r).to,a=Q(t,o,i),s=l.qv.create(r,a);n.setSelection(s)}return!0}}}),Pt=Object.freeze({__proto__:null,setTextSelection:function(t){return function(e){var n=e.tr;if(e.dispatch){var r=n.doc,o="number"==typeof t?{from:t,to:t}:t,i=o.from,a=o.to,s=l.Bs.atStart(r).from,u=l.Bs.atEnd(r).to,c=Q(i,s,u),d=Q(a,s,u),f=l.Bs.create(r,c,d);n.setSelection(f)}return!0}}}),Bt=Object.freeze({__proto__:null,sinkListItem:function(t){return function(e){var n=e.state,r=e.dispatch,o=Z(t,n.schema);return(0,v.bw)(o)(n,r)}}});function Nt(t,e,n){return Object.fromEntries(Object.entries(n).filter((function(n){var r=(0,u.Z)(n,1)[0],o=t.find((function(t){return t.type===e&&t.name===r}));return!!o&&o.attribute.keepOnSplit})))}function Zt(t){for(var e=0;e<t.edgeCount;e+=1){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Dt(t,e){var n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){var r=n.filter((function(t){return null==e?void 0:e.includes(t.type.name)}));t.tr.ensureMarks(r)}}var $t=Object.freeze({__proto__:null,splitBlock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.keepMarks,n=void 0===e||e;return function(t){var e=t.tr,r=t.state,o=t.dispatch,i=t.editor,a=e.selection,s=e.doc,u=a.$from,c=a.$to,d=Nt(i.extensionManager.attributes,u.node().type.name,u.node().attrs);if(a instanceof l.qv&&a.node.isBlock)return!(!u.parentOffset||!(0,p.Ax)(s,u.pos))&&(o&&(n&&Dt(r,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;if(o){var f=c.parentOffset===c.parent.content.size;a instanceof l.Bs&&e.deleteSelection();var h=0===u.depth?void 0:Zt(u.node(-1).contentMatchAt(u.indexAfter(-1))),m=f&&h?[{type:h,attrs:d}]:void 0,v=(0,p.Ax)(e.doc,e.mapping.map(u.pos),1,m);if(m||v||!(0,p.Ax)(e.doc,e.mapping.map(u.pos),1,h?[{type:h}]:void 0)||(v=!0,m=h?[{type:h,attrs:d}]:void 0),v&&(e.split(e.mapping.map(u.pos),1,m),h&&!f&&!u.parentOffset&&u.parent.type!==h)){var g=e.mapping.map(u.before()),y=e.doc.resolve(g);u.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(u.before()),h)}n&&Dt(r,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0}}}),It=Object.freeze({__proto__:null,splitListItem:function(t){return function(e){var n,r=e.tr,o=e.state,i=e.dispatch,a=e.editor,s=Z(t,o.schema),u=o.selection,c=u.$from,d=u.$to,f=o.selection.node;if(f&&f.isBlock||c.depth<2||!c.sameParent(d))return!1;var h=c.node(-1);if(h.type!==s)return!1;var v=a.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==s||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){for(var g=m.HY.empty,y=c.index(-1)?1:c.index(-2)?2:3,b=c.depth-y;b>=c.depth-3;b-=1)g=m.HY.from(c.node(b).copy(g));var k=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,_=Nt(v,c.node().type.name,c.node().attrs),w=(null===(n=s.contentMatch.defaultType)||void 0===n?void 0:n.createAndFill(_))||void 0;g=g.append(m.HY.from(s.createAndFill(null,w)||void 0));var O=c.before(c.depth-(y-1));r.replace(O,c.after(-k),new m.p2(g,4-y,0));var x=-1;r.doc.nodesBetween(O,r.doc.content.size,(function(t,e){if(x>-1)return!1;t.isTextblock&&0===t.content.size&&(x=e+1)})),x>-1&&r.setSelection(l.Bs.near(r.doc.resolve(x))),r.scrollIntoView()}return!0}var M=d.pos===c.end()?h.contentMatchAt(0).defaultType:null,S=Nt(v,h.type.name,h.attrs),E=Nt(v,c.node().type.name,c.node().attrs);r.delete(c.pos,d.pos);var j=M?[{type:s,attrs:S},{type:M,attrs:E}]:[{type:s,attrs:S}];return!!(0,p.Ax)(r.doc,c.pos,2)&&(i&&r.split(c.pos,2,j).scrollIntoView(),!0)}}});function Rt(t){return function(e){return function(t,e){for(var n=t.depth;n>0;n-=1){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}(e.$from,t)}}function Ht(t){return{baseExtensions:t.filter((function(t){return"extension"===t.type})),nodeExtensions:t.filter((function(t){return"node"===t.type})),markExtensions:t.filter((function(t){return"mark"===t.type}))}}function Lt(t,e){var n=Ht(e).nodeExtensions.find((function(e){return e.name===t}));if(!n)return!1;var r=M(S(n,"group",{name:n.name,options:n.options,storage:n.storage}));return"string"==typeof r&&r.split(" ").includes("list")}var Ft=function(t,e){var n=Rt((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!(0,p.Mn)(t.doc,n.pos)||(t.join(n.pos),!0)},Kt=function(t,e){var n=Rt((function(t){return t.type===e}))(t.selection);if(!n)return!0;var r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;var o=t.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!(0,p.Mn)(t.doc,r)||(t.join(r),!0)},Vt=Object.freeze({__proto__:null,toggleList:function(t,e){return function(n){var r=n.editor,o=n.tr,i=n.state,a=n.dispatch,s=n.chain,u=n.commands,c=n.can,d=r.extensionManager.extensions,f=Z(t,i.schema),l=Z(e,i.schema),p=i.selection,h=p.$from,m=p.$to,v=h.blockRange(m);if(!v)return!1;var g=Rt((function(t){return Lt(t.type.name,d)}))(p);if(v.depth>=1&&g&&v.depth-g.depth<=1){if(g.node.type===f)return u.liftListItem(l);if(Lt(g.node.type.name,d)&&f.validContent(g.node.content)&&a)return s().command((function(){return o.setNodeMarkup(g.pos,f),!0})).command((function(){return Ft(o,f)})).command((function(){return Kt(o,f)})).run()}return s().command((function(){return!!c().wrapInList(f)||u.clearNodes()})).wrapInList(f).command((function(){return Ft(o,f)})).command((function(){return Kt(o,f)})).run()}}});function Wt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.selection,o=r.empty,i=r.ranges,a=e?L(e,t.schema):null;if(o)return!!(t.storedMarks||t.selection.$from.marks()).filter((function(t){return!a||a.name===t.type.name})).find((function(t){return K(t.attrs,n,{strict:!1})}));var u=0,c=[];if(i.forEach((function(e){var n=e.$from,r=e.$to,o=n.pos,i=r.pos;t.doc.nodesBetween(o,i,(function(t,e){if(t.isText||t.marks.length){var n=Math.max(o,e),r=Math.min(i,e+t.nodeSize);u+=r-n,c.push.apply(c,(0,s.Z)(t.marks.map((function(t){return{mark:t,from:n,to:r}}))))}}))})),0===u)return!1;var d=c.filter((function(t){return!a||a.name===t.mark.type.name})).filter((function(t){return K(t.mark.attrs,n,{strict:!1})})).reduce((function(t,e){return t+e.to-e.from}),0),f=c.filter((function(t){return!a||t.mark.type!==a&&t.mark.type.excludes(a)})).reduce((function(t,e){return t+e.to-e.from}),0),l=d>0?d+f:d;return l>=u}var Ut=Object.freeze({__proto__:null,toggleMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=n.extendEmptyMarkRange,s=void 0!==a&&a,u=L(t,o.schema);return Wt(o,u,e)?i.unsetMark(u,{extendEmptyMarkRange:s}):i.setMark(u,e)}}}),Gt=Object.freeze({__proto__:null,toggleNode:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=r.state,i=r.commands,a=Z(t,o.schema),s=Z(e,o.schema);return ft(o,a,n)?i.setNode(s):i.setNode(a,n)}}}),Yt=Object.freeze({__proto__:null,toggleWrap:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.commands,i=Z(t,r.schema);return ft(r,i,e)?o.lift(i):o.wrapIn(i,e)}}}),Jt=Object.freeze({__proto__:null,undoInputRule:function(){return function(t){for(var e=t.state,n=t.dispatch,r=e.plugins,o=0;o<r.length;o+=1){var i=r[o],a=void 0;if(i.spec.isInputRules&&(a=i.getState(e))){if(n){for(var s=e.tr,u=a.transform,c=u.steps.length-1;c>=0;c-=1)s.step(u.steps[c].invert(u.docs[c]));if(a.text){var d=s.doc.resolve(a.from).marks();s.replaceWith(a.from,a.to,e.schema.text(a.text,d))}else s.delete(a.from,a.to)}return!0}}return!1}}}),qt=Object.freeze({__proto__:null,unsetAllMarks:function(){return function(t){var e=t.tr,n=t.dispatch,r=e.selection,o=r.empty,i=r.ranges;return o||n&&i.forEach((function(t){e.removeMark(t.$from.pos,t.$to.pos)})),!0}}}),Xt=Object.freeze({__proto__:null,unsetMark:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o=n.tr,i=n.state,a=n.dispatch,s=e.extendEmptyMarkRange,u=void 0!==s&&s,c=o.selection,d=L(t,i.schema),f=c.$from,l=c.empty,p=c.ranges;if(!a)return!0;if(l&&u){var h=c.from,m=c.to,v=null===(r=f.marks().find((function(t){return t.type===d})))||void 0===r?void 0:r.attrs,g=U(f,d,v);g&&(h=g.from,m=g.to),o.removeMark(h,m,d)}else p.forEach((function(t){o.removeMark(t.$from.pos,t.$to.pos,d)}));return o.removeStoredMark(d),!0}}}),Qt=Object.freeze({__proto__:null,updateAttributes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.tr,o=n.state,i=n.dispatch,a=null,s=null,u=vt("string"==typeof t?t:t.name,o.schema);return!!u&&("node"===u&&(a=Z(t,o.schema)),"mark"===u&&(s=L(t,o.schema)),i&&r.selection.ranges.forEach((function(t){var n=t.$from.pos,i=t.$to.pos;o.doc.nodesBetween(n,i,(function(t,o){a&&a===t.type&&r.setNodeMarkup(o,void 0,_(_({},t.attrs),e)),s&&t.marks.length&&t.marks.forEach((function(a){if(s===a.type){var u=Math.max(o,n),c=Math.min(o+t.nodeSize,i);r.addMark(u,c,s.create(_(_({},a.attrs),e)))}}))}))})),!0)}}}),te=Object.freeze({__proto__:null,wrapIn:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch,i=Z(t,r.schema);return(0,h.ym)(i,e)(r,o)}}}),ee=Object.freeze({__proto__:null,wrapInList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.state,o=n.dispatch,i=Z(t,r.schema);return(0,v.KI)(i,e)(r,o)}}}),ne=E.create({name:"commands",addCommands:function(){return _(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_(_({},A),z),P),B),N),D),$),I),R),H),G),Y),et),nt),rt),at),st),ut),dt),lt),pt),ht),mt),yt),bt),kt),_t),wt),Ot),xt),Mt),Et),Ct),Tt),At),zt),Pt),Bt),$t),It),Vt),Ut),Gt),Yt),Jt),qt),Xt),Qt),te),ee)}}),re=E.create({name:"editable",addProseMirrorPlugins:function(){var t=this;return[new l.Sy({key:new l.H$("editable"),props:{editable:function(){return t.editor.options.editable}}})]}}),oe=E.create({name:"focusEvents",addProseMirrorPlugins:function(){var t=this.editor;return[new l.Sy({key:new l.H$("focusEvents"),props:{handleDOMEvents:{focus:function(e,n){t.isFocused=!0;var r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:function(e,n){t.isFocused=!1;var r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});function ie(t){var e=t.state,n=t.transaction,r=n.selection,o=n.doc,i=n.storedMarks;return _(_({},e),{},{schema:e.schema,plugins:e.plugins,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}})}var ae=function(){function t(e){(0,c.Z)(this,t),this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}return(0,d.Z)(t,[{key:"hasCustomState",get:function(){return!!this.customState}},{key:"state",get:function(){return this.customState||this.editor.state}},{key:"commands",get:function(){var t=this,e=this.rawCommands,n=this.editor,r=this.state,o=n.view,i=r.tr,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,u.Z)(e,2),r=n[0],s=n[1];return[r,function(){var e=s.apply(void 0,arguments)(a);return i.getMeta("preventDispatch")||t.hasCustomState||o.dispatch(i),e}]})))}},{key:"chain",get:function(){var t=this;return function(){return t.createChain()}}},{key:"can",get:function(){var t=this;return function(){return t.createCan()}}},{key:"createChain",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view,s=[],c=!!t,d=t||i.tr,f=function(){return c||!n||d.getMeta("preventDispatch")||e.hasCustomState||a.dispatch(d),s.every((function(t){return!0===t}))},l=_(_({},Object.fromEntries(Object.entries(r).map((function(t){var r=(0,u.Z)(t,2),o=r[0],i=r[1];return[o,function(){var t=e.buildProps(d,n),r=i.apply(void 0,arguments)(t);return s.push(r),l}]})))),{},{run:f});return l}},{key:"createCan",value:function(t){var e=this,n=this.rawCommands,r=this.state,o=void 0,i=t||r.tr,a=this.buildProps(i,o),s=Object.fromEntries(Object.entries(n).map((function(t){var e=(0,u.Z)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(_(_({},a),{},{dispatch:o}))}]})));return _(_({},s),{},{chain:function(){return e.createChain(i,o)}})}},{key:"buildProps",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.rawCommands,o=this.editor,i=this.state,a=o.view;i.storedMarks&&t.setStoredMarks(i.storedMarks);var s={tr:t,editor:o,view:a,state:ie({state:i,transaction:t}),dispatch:n?function(){}:void 0,chain:function(){return e.createChain(t)},can:function(){return e.createCan(t)},get commands(){return Object.fromEntries(Object.entries(r).map((function(t){var e=(0,u.Z)(t,2),n=e[0],r=e[1];return[n,function(){return r.apply(void 0,arguments)(s)}]})))}};return s}}]),t}(),se=E.create({name:"keymap",addKeyboardShortcuts:function(){var t=this,e=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.undoInputRule()},function(){return e.command((function(t){var n=t.tr,r=n.selection,o=n.doc,i=r.empty,a=r.$anchor,s=a.pos,u=a.parent,c=l.Y1.atStart(o).from===s;return!(!(i&&c&&u.type.isTextblock)||u.textContent.length)&&e.clearNodes()}))},function(){return e.deleteSelection()},function(){return e.joinBackward()},function(){return e.selectNodeBackward()}]}))},n=function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.deleteSelection()},function(){return e.joinForward()},function(){return e.selectNodeForward()}]}))},r={Enter:function(){return t.editor.commands.first((function(t){var e=t.commands;return[function(){return e.newlineInCode()},function(){return e.createParagraphNear()},function(){return e.liftEmptyBlock()},function(){return e.splitBlock()}]}))},"Mod-Enter":function(){return t.editor.commands.exitCode()},Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":function(){return t.editor.commands.selectAll()}},o=_(_({},r),{},{Home:function(){return t.editor.commands.selectTextblockStart()},End:function(){return t.editor.commands.selectTextblockEnd()}}),i=_(_({},r),{},{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":function(){return t.editor.commands.selectTextblockStart()},"Ctrl-e":function(){return t.editor.commands.selectTextblockEnd()}});return X()||ct()?i:o},addProseMirrorPlugins:function(){var t=this;return[new l.Sy({key:new l.H$("clearDocument"),appendTransaction:function(e,n,r){if(e.some((function(t){return t.docChanged}))&&!n.doc.eq(r.doc)){var o=n.selection,i=o.empty,a=o.from,s=o.to,u=l.Y1.atStart(n.doc).from,c=l.Y1.atEnd(n.doc).to,d=a===u&&s===c,f=0===r.doc.textBetween(0,r.doc.content.size," "," ").length;if(!i&&d&&f){var p=r.tr,h=ie({state:r,transaction:p});if(new ae({editor:t.editor,state:h}).commands.clearNodes(),p.steps.length)return p}}}})]}}),ue=E.create({name:"tabindex",addProseMirrorPlugins:function(){var t=this;return[new l.Sy({key:new l.H$("tabindex"),props:{attributes:function(){if(t.editor.isEditable)return{tabindex:"0"}}}})]}}),ce=Object.freeze({__proto__:null,ClipboardTextSerializer:T,Commands:ne,Editable:re,FocusEvents:oe,Keymap:se,Tabindex:ue});function de(t,e){var n=vt("string"==typeof e?e:e.name,t.schema);return"node"===n?function(t,e){var n=Z(e,t.schema),r=t.selection,o=r.from,i=r.to,a=[];t.doc.nodesBetween(o,i,(function(t){a.push(t)}));var s=a.reverse().find((function(t){return t.type.name===n.name}));return s?_({},s.attrs):{}}(t,e):"mark"===n?jt(t,e):{}}function fe(t,e){var n=m.PW.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function le(t,e){return j(t,{from:0,to:t.content.size},e)}var pe=(0,d.Z)((function t(e){(0,c.Z)(this,t),this.find=e.find,this.handler=e.handler}));function he(t){var e,n=t.editor,r=t.from,o=t.to,i=t.text,a=t.rules,s=t.plugin,u=n.view;if(u.composing)return!1;var c=u.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((function(t){return t.type.spec.code}))))return!1;var d=!1,f=c.parent.textBetween(Math.max(0,c.parentOffset-500),c.parentOffset,void 0," ")+i;return a.forEach((function(t){if(!d){var e=function(t,e){if(F(e))return e.exec(t);var n=e(t);if(!n)return null;var r=[];return r.push(n.text),r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r}(f,t.find);if(e){var a=u.state.tr,c=ie({state:u.state,transaction:a}),l={from:r-(e[0].length-i.length),to:o},p=new ae({editor:n,state:c}),h=p.commands,m=p.chain,v=p.can;null!==t.handler({state:c,range:l,match:e,commands:h,chain:m,can:v})&&a.steps.length&&(a.setMeta(s,{transform:a,from:r,to:o,text:i}),u.dispatch(a),d=!0)}}})),d}function me(t){var e=t.editor,n=t.rules,r=new l.Sy({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,o,i,a){return he({editor:e,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:function(t){return setTimeout((function(){var o=t.state.selection.$cursor;o&&he({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1}},handleKeyDown:function(t,o){if("Enter"!==o.key)return!1;var i=t.state.selection.$cursor;return!!i&&he({editor:e,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}var ve=(0,d.Z)((function t(e){(0,c.Z)(this,t),this.find=e.find,this.handler=e.handler}));function ge(t){var e=t.editor,n=t.state,r=t.from,o=t.to,i=t.rule,a=new ae({editor:e,state:n}),u=a.commands,c=a.chain,d=a.can,f=[];return n.doc.nodesBetween(r,o,(function(t,e){if(t.isTextblock&&!t.type.spec.code){var a=Math.max(r,e),l=Math.min(o,e+t.content.size);(function(t,e){if(F(e))return(0,s.Z)(t.matchAll(e));var n=e(t);return n?n.map((function(e){var n=[];return n.push(e.text),n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]})(t.textBetween(a-e,l-e,void 0,"ï¿¼"),i.find).forEach((function(t){if(void 0!==t.index){var e=a+t.index+1,r=e+t[0].length,o={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},s=i.handler({state:n,range:o,match:t,commands:u,chain:c,can:d});f.push(s)}}))}})),f.every((function(t){return null!==t}))}function ye(t){var e=[],n=Ht(t),r=n.nodeExtensions,o=n.markExtensions,i=[].concat((0,s.Z)(r),(0,s.Z)(o)),a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return t.forEach((function(t){var n=S(t,"addGlobalAttributes",{name:t.name,options:t.options,storage:t.storage});n&&n().forEach((function(t){t.types.forEach((function(n){Object.entries(t.attributes).forEach((function(t){var r=(0,u.Z)(t,2),o=r[0],i=r[1];e.push({type:n,name:o,attribute:_(_({},a),i)})}))}))}))})),i.forEach((function(t){var n={name:t.name,options:t.options,storage:t.storage},r=S(t,"addAttributes",n);if(r){var o=r();Object.entries(o).forEach((function(n){var r=(0,u.Z)(n,2),o=r[0],i=r[1];e.push({type:t.name,name:o,attribute:_(_({},a),i)})}))}})),e}function be(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return!!t})).reduce((function(t,e){var n=_({},t);return Object.entries(e).forEach((function(t){var e=(0,u.Z)(t,2),r=e[0],o=e[1];n[r]?n[r]="class"===r?[n[r],o].join(" "):"style"===r?[n[r],o].join("; "):o:n[r]=o})),n}),{})}function ke(t,e){return e.filter((function(t){return t.attribute.rendered})).map((function(e){return e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:(0,f.Z)({},e.name,t.attrs[e.name])})).reduce((function(t,e){return be(t,e)}),{})}function _e(t,e){return t.style?t:_(_({},t),{},{getAttrs:function(n){var r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;var o=e.reduce((function(t,e){var r=e.attribute.parseHTML?e.attribute.parseHTML(n):function(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}(n.getAttribute(e.name));return null==r?t:_(_({},t),{},(0,f.Z)({},e.name,r))}),{});return _(_({},r),o)}})}function we(t){return Object.fromEntries(Object.entries(t).filter((function(t){var e=(0,u.Z)(t,2),n=e[0],r=e[1];return("attrs"!==n||!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(t).length&&t.constructor===Object}(r))&&null!=r})))}function Oe(t){var e,n=ye(t),r=Ht(t),o=r.nodeExtensions,i=r.markExtensions,a=null===(e=o.find((function(t){return S(t,"topNode")})))||void 0===e?void 0:e.name,s=Object.fromEntries(o.map((function(e){var r=n.filter((function(t){return t.type===e.name})),o={name:e.name,options:e.options,storage:e.storage},i=t.reduce((function(t,n){var r=S(n,"extendNodeSchema",o);return _(_({},t),r?r(e):{})}),{}),a=we(_(_({},i),{},{content:M(S(e,"content",o)),marks:M(S(e,"marks",o)),group:M(S(e,"group",o)),inline:M(S(e,"inline",o)),atom:M(S(e,"atom",o)),selectable:M(S(e,"selectable",o)),draggable:M(S(e,"draggable",o)),code:M(S(e,"code",o)),defining:M(S(e,"defining",o)),isolating:M(S(e,"isolating",o)),attrs:Object.fromEntries(r.map((function(t){var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),s=M(S(e,"parseHTML",o));s&&(a.parseDOM=s.map((function(t){return _e(t,r)})));var u=S(e,"renderHTML",o);u&&(a.toDOM=function(t){return u({node:t,HTMLAttributes:ke(t,r)})});var c=S(e,"renderText",o);return c&&(a.toText=c),[e.name,a]}))),u=Object.fromEntries(i.map((function(e){var r=n.filter((function(t){return t.type===e.name})),o={name:e.name,options:e.options,storage:e.storage},i=t.reduce((function(t,n){var r=S(n,"extendMarkSchema",o);return _(_({},t),r?r(e):{})}),{}),a=we(_(_({},i),{},{inclusive:M(S(e,"inclusive",o)),excludes:M(S(e,"excludes",o)),group:M(S(e,"group",o)),spanning:M(S(e,"spanning",o)),code:M(S(e,"code",o)),attrs:Object.fromEntries(r.map((function(t){var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))})),s=M(S(e,"parseHTML",o));s&&(a.parseDOM=s.map((function(t){return _e(t,r)})));var u=S(e,"renderHTML",o);return u&&(a.toDOM=function(t){return u({mark:t,HTMLAttributes:ke(t,r)})}),[e.name,a]})));return new m.V_({topNode:a,nodes:s,marks:u})}function xe(t,e){return e.nodes[t]||e.marks[t]||null}function Me(t,e){return Array.isArray(e)?e.some((function(e){return("string"==typeof e?e:e.name)===t.name})):e}var Se=function(){function t(e,n){var r=this;(0,c.Z)(this,t),this.splittableMarks=[],this.editor=n,this.extensions=t.resolve(e),this.schema=Oe(this.extensions),this.extensions.forEach((function(t){var e;r.editor.extensionStorage[t.name]=t.storage;var n={name:t.name,options:t.options,storage:t.storage,editor:r.editor,type:xe(t.name,r.schema)};"mark"===t.type&&((null===(e=M(S(t,"keepOnSplit",n)))||void 0===e||e)&&r.splittableMarks.push(t.name));var o=S(t,"onBeforeCreate",n);o&&r.editor.on("beforeCreate",o);var i=S(t,"onCreate",n);i&&r.editor.on("create",i);var a=S(t,"onUpdate",n);a&&r.editor.on("update",a);var s=S(t,"onSelectionUpdate",n);s&&r.editor.on("selectionUpdate",s);var u=S(t,"onTransaction",n);u&&r.editor.on("transaction",u);var c=S(t,"onFocus",n);c&&r.editor.on("focus",c);var d=S(t,"onBlur",n);d&&r.editor.on("blur",d);var f=S(t,"onDestroy",n);f&&r.editor.on("destroy",f)}))}return(0,d.Z)(t,[{key:"commands",get:function(){var t=this;return this.extensions.reduce((function(e,n){var r=S(n,"addCommands",{name:n.name,options:n.options,storage:n.storage,editor:t.editor,type:xe(n.name,t.schema)});return r?_(_({},e),r()):e}),{})}},{key:"plugins",get:function(){var e=this,n=this.editor,r=t.sort((0,s.Z)(this.extensions).reverse()),o=[],i=[],a=r.map((function(t){var r={name:t.name,options:t.options,storage:t.storage,editor:n,type:xe(t.name,e.schema)},a=[],c=S(t,"addKeyboardShortcuts",r);if(c){var d=Object.fromEntries(Object.entries(c()).map((function(t){var e=(0,u.Z)(t,2),r=e[0],o=e[1];return[r,function(){return o({editor:n})}]}))),f=(0,y.h)(d);a.push(f)}var l=S(t,"addInputRules",r);Me(t,n.options.enableInputRules)&&l&&o.push.apply(o,(0,s.Z)(l()));var p=S(t,"addPasteRules",r);Me(t,n.options.enablePasteRules)&&p&&i.push.apply(i,(0,s.Z)(p()));var h=S(t,"addProseMirrorPlugins",r);if(h){var m=h();a.push.apply(a,(0,s.Z)(m))}return a})).flat();return[me({editor:n,rules:o})].concat((0,s.Z)(function(t){var e=t.editor,n=t.rules,r=null,o=!1,i=!1;return n.map((function(t){return new l.Sy({view:function(t){var e=function(e){var n;r=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy:function(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:function(t){return i=r===t.dom.parentElement,!1},paste:function(t,e){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return o=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:function(n,r,a){var s=n[0],u="paste"===s.getMeta("uiEvent")&&!o,c="drop"===s.getMeta("uiEvent")&&!i;if(u||c){var d=r.doc.content.findDiffStart(a.doc.content),f=r.doc.content.findDiffEnd(a.doc.content);if("number"==typeof d&&f&&d!==f.b){var l=a.tr,p=ie({state:a,transaction:l});if(ge({editor:e,state:p,from:Math.max(d-1,0),to:f.b,rule:t})&&l.steps.length)return l}}}})}))}({editor:n,rules:i})),(0,s.Z)(a))}},{key:"attributes",get:function(){return ye(this.extensions)}},{key:"nodeViews",get:function(){var t=this,e=this.editor,n=Ht(this.extensions).nodeExtensions;return Object.fromEntries(n.filter((function(t){return!!S(t,"addNodeView")})).map((function(n){var r=t.attributes.filter((function(t){return t.type===n.name})),o={name:n.name,options:n.options,storage:n.storage,editor:e,type:Z(n.name,t.schema)},i=S(n,"addNodeView",o);if(!i)return[];return[n.name,function(t,o,a,s){var u=ke(t,r);return i()({editor:e,node:t,getPos:a,decorations:s,HTMLAttributes:u,extension:n})}]})))}}],[{key:"resolve",value:function(e){var n,r,o=t.sort(t.flatten(e)),i=(n=o.map((function(t){return t.name})),r=n.filter((function(t,e){return n.indexOf(t)!==e})),(0,s.Z)(new Set(r)));return i.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(i.map((function(t){return"'".concat(t,"'")})).join(", "),"]. This can lead to issues.")),o}},{key:"flatten",value:function(t){var e=this;return t.map((function(t){var n=S(t,"addExtensions",{name:t.name,options:t.options,storage:t.storage});return n?[t].concat((0,s.Z)(e.flatten(n()))):t})).flat(10)}},{key:"sort",value:function(t){return t.sort((function(t,e){var n=S(t,"priority")||100,r=S(e,"priority")||100;return n>r?-1:n<r?1:0}))}}]),t}(),Ee=function(){function t(){(0,c.Z)(this,t),this.callbacks={}}return(0,d.Z)(t,[{key:"on",value:function(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this.callbacks[t];return i&&i.forEach((function(t){return t.apply(e,r)})),this}},{key:"off",value:function(t,e){var n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((function(t){return t!==e})):delete this.callbacks[t]),this}},{key:"removeAllListeners",value:function(){this.callbacks={}}}]),t}(),je=function(t){(0,o.Z)(n,t);var e=b(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)(this,n),(t=e.call(this)).isFocused=!1,t.extensionStorage={},t.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:function(){return null},onCreate:function(){return null},onUpdate:function(){return null},onSelectionUpdate:function(){return null},onTransaction:function(){return null},onFocus:function(){return null},onBlur:function(){return null},onDestroy:function(){return null}},t.isCapturingTransaction=!1,t.capturedTransaction=null,t.setOptions(o),t.createExtensionManager(),t.createCommandManager(),t.createSchema(),t.on("beforeCreate",t.options.onBeforeCreate),t.emit("beforeCreate",{editor:(0,r.Z)(t)}),t.createView(),t.injectCSS(),t.on("create",t.options.onCreate),t.on("update",t.options.onUpdate),t.on("selectionUpdate",t.options.onSelectionUpdate),t.on("transaction",t.options.onTransaction),t.on("focus",t.options.onFocus),t.on("blur",t.options.onBlur),t.on("destroy",t.options.onDestroy),window.setTimeout((function(){t.isDestroyed||(t.commands.focus(t.options.autofocus),t.emit("create",{editor:(0,r.Z)(t)}))}),0),t}return(0,d.Z)(n,[{key:"storage",get:function(){return this.extensionStorage}},{key:"commands",get:function(){return this.commandManager.commands}},{key:"chain",value:function(){return this.commandManager.chain()}},{key:"can",value:function(){return this.commandManager.can()}},{key:"injectCSS",value:function(){this.options.injectCSS&&document&&(this.css=function(t){var e=document.querySelector("style[data-tiptap-style]");if(null!==e)return e;var n=document.createElement("style");return n.setAttribute("data-tiptap-style",""),n.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(n),n}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}},{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=_(_({},this.options),t),this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}},{key:"setEditable",value:function(t){this.setOptions({editable:t})}},{key:"isEditable",get:function(){return this.options.editable&&this.view&&this.view.editable}},{key:"state",get:function(){return this.view.state}},{key:"registerPlugin",value:function(t,e){var n=x(e)?e(t,this.state.plugins):[].concat((0,s.Z)(this.state.plugins),[t]),r=this.state.reconfigure({plugins:n});this.view.updateState(r)}},{key:"unregisterPlugin",value:function(t){if(!this.isDestroyed){var e="string"==typeof t?"".concat(t,"$"):t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((function(t){return!t.key.startsWith(e)}))});this.view.updateState(n)}}},{key:"createExtensionManager",value:function(){var t=this.options.enableCoreExtensions?Object.values(ce):[],e=[].concat((0,s.Z)(t),(0,s.Z)(this.options.extensions)).filter((function(t){return["extension","node","mark"].includes(null==t?void 0:t.type)}));this.extensionManager=new Se(e,this)}},{key:"createCommandManager",value:function(){this.commandManager=new ae({editor:this})}},{key:"createSchema",value:function(){this.schema=this.extensionManager.schema}},{key:"createView",value:function(){var t=St(this.options.content,this.schema,this.options.parseOptions),e=tt(t,this.options.autofocus);this.view=new g.tk(this.options.element,_(_({},this.options.editorProps),{},{dispatchTransaction:this.dispatchTransaction.bind(this),state:l.yy.create({doc:t,selection:e})}));var n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.view.dom.editor=this}},{key:"createNodeViews",value:function(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}},{key:"captureTransaction",value:function(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;var e=this.capturedTransaction;return this.capturedTransaction=null,e}},{key:"dispatchTransaction",value:function(t){var e=this;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((function(t){var n;return null===(n=e.capturedTransaction)||void 0===n?void 0:n.step(t)})):void(this.capturedTransaction=t);var n=this.state.apply(t),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:t}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});var o=t.getMeta("focus"),i=t.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}},{key:"getAttributes",value:function(t){return de(this.state,t)}},{key:"isActive",value:function(t,e){var n="string"==typeof t?t:null,r="string"==typeof t?e:t;return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return ft(t,null,n)||Wt(t,null,n);var r=vt(e,t.schema);return"node"===r?ft(t,e,n):"mark"===r&&Wt(t,e,n)}(this.state,n,r)}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"getHTML",value:function(){return fe(this.state.doc.content,this.schema)}},{key:"getText",value:function(t){var e=t||{},n=e.blockSeparator,r=void 0===n?"\n\n":n,o=e.textSerializers,i=void 0===o?{}:o;return le(this.state.doc,{blockSeparator:r,textSerializers:_(_({},i),C(this.schema))})}},{key:"isEmpty",get:function(){return t=this.state.doc,n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON(),JSON.stringify(n)===JSON.stringify(r);var t,e,n,r}},{key:"getCharacterCount",value:function(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}},{key:"destroy",value:function(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}},{key:"isDestroyed",get:function(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}]),n}(Ee),Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)(this,t),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=_(_({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(S(this,"addOptions",{name:this.name}))),this.storage=M(S(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=O(this.options,t),e.storage=M(S(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=M(S(n,"addOptions",{name:n.name})),n.storage=M(S(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}(),Te=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c.Z)(this,t),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=_(_({},this.config),e),this.name=this.config.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(S(this,"addOptions",{name:this.name}))),this.storage=M(S(this,"addStorage",{name:this.name,options:this.options}))||{}}return(0,d.Z)(t,[{key:"configure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.extend();return e.options=O(this.options,t),e.storage=M(S(e,"addStorage",{name:e.name,options:e.options})),e}},{key:"extend",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(n.name,'".')),n.options=M(S(n,"addOptions",{name:n.name})),n.storage=M(S(n,"addStorage",{name:n.name,options:n.options})),n}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t(e)}}]),t}(),Ae=function(){function t(e,n,r){(0,c.Z)(this,t),this.isDragging=!1,this.component=e,this.editor=n.editor,this.options=_({stopEvent:null,ignoreMutation:null},r),this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.getPos=n.getPos,this.mount()}return(0,d.Z)(t,[{key:"mount",value:function(){}},{key:"dom",get:function(){return null}},{key:"contentDOM",get:function(){return null}},{key:"onDragStart",value:function(t){var e,n,r,o=this.editor.view,i=t.target,a=3===i.nodeType?null===(e=i.parentElement)||void 0===e?void 0:e.closest("[data-drag-handle]"):i.closest("[data-drag-handle]");if(this.dom&&!(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(i))&&a){var s=0,u=0;if(this.dom!==a){var c=this.dom.getBoundingClientRect(),d=a.getBoundingClientRect();s=d.x-c.x+t.offsetX,u=d.y-c.y+t.offsetY}null===(r=t.dataTransfer)||void 0===r||r.setDragImage(this.dom,s,u);var f=l.qv.create(o.state.doc,this.getPos()),p=o.state.tr.setSelection(f);o.dispatch(p)}}},{key:"stopEvent",value:function(t){var e,n=this;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});var r=t.target;if(!(this.dom.contains(r)&&!(null===(e=this.contentDOM)||void 0===e?void 0:e.contains(r))))return!1;var o="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!o)return!0;var i=this.editor.isEditable,a=this.isDragging,s=!!this.node.type.spec.draggable,u=l.qv.isSelectable(this.node),c="copy"===t.type,d="paste"===t.type,f="cut"===t.type,p="mousedown"===t.type,h=t.type.startsWith("drag");if(!s&&u&&h&&t.preventDefault(),s&&h&&!a)return t.preventDefault(),!1;if(s&&i&&!a&&p){var m=r.closest("[data-drag-handle]");m&&(this.dom===m||this.dom.contains(m))&&(this.isDragging=!0,document.addEventListener("dragend",(function(){n.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(function(){n.isDragging=!1}),{once:!0}))}return!(a||o||c||d||f||p&&u)}},{key:"ignoreMutation",value:function(t){if(!this.dom||!this.contentDOM)return!0;if("function"==typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:t});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===t.type)return!1;if(this.dom.contains(t.target)&&"childList"===t.type&&X()&&this.editor.isFocused&&[].concat((0,s.Z)(Array.from(t.addedNodes)),(0,s.Z)(Array.from(t.removedNodes))).every((function(t){return t.isContentEditable})))return!1;return this.contentDOM===t.target&&"attributes"===t.type||!this.contentDOM.contains(t.target)}},{key:"updateAttributes",value:function(t){var e=this;this.editor.commands.command((function(n){var r=n.tr,o=e.getPos();return r.setNodeMarkup(o,void 0,_(_({},e.node.attrs),t)),!0}))}},{key:"deleteNode",value:function(){var t=this.getPos(),e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}}]),t}();function ze(t){return new pe({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=M(t.getAttributes,void 0,o)||{},a=n.tr,s=r.from,u=r.to;if(o[1]){var c=s+o[0].lastIndexOf(o[1]);c>u?c=u:u=c+o[1].length;var d=o[0][o[0].length-1];a.insertText(d,s+o[0].length-1),a.replaceWith(c,u,t.type.create(i))}else o[0]&&a.replaceWith(s,u,t.type.create(i))}})}function Pe(t,e,n){var r=[];return t===e?n.resolve(t).marks().forEach((function(e){var o=U(n.resolve(t-1),e.type);o&&r.push(_({mark:e},o))})):n.nodesBetween(t,e,(function(t,e){r.push.apply(r,(0,s.Z)(t.marks.map((function(n){return{from:e,to:e+t.nodeSize,mark:n}}))))})),r}function Be(t){return new pe({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=M(t.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],u=o[0],c=r.to;if(s){var d=u.search(/\S/),f=r.from+u.indexOf(s),l=f+s.length;if(Pe(r.from,r.to,n.doc).filter((function(e){return e.mark.type.excluded.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>f})).length)return null;l<r.to&&a.delete(l,r.to),f>r.from&&a.delete(r.from+d,f),c=r.from+d+s.length,a.addMark(r.from+d,c,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function Ne(t){return new pe({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=n.doc.resolve(r.from),a=M(t.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,a)}})}function Ze(t){return new pe({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=M(t.getAttributes,void 0,o)||{},a=n.tr.delete(r.from,r.to),s=a.doc.resolve(r.from).blockRange(),u=s&&(0,p.nd)(s,t.type,i);if(!u)return null;a.wrap(s,u);var c=a.doc.resolve(r.from-1).nodeBefore;c&&c.type===t.type&&(0,p.Mn)(a.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(o,c))&&a.join(r.from-1)}})}function De(t){return new ve({find:t.find,handler:function(e){var n=e.state,r=e.range,o=e.match,i=M(t.getAttributes,void 0,o);if(!1===i||null===i)return null;var a=n.tr,s=o[o.length-1],u=o[0],c=r.to;if(s){var d=u.search(/\S/),f=r.from+u.indexOf(s),l=f+s.length;if(Pe(r.from,r.to,n.doc).filter((function(e){return e.mark.type.excluded.find((function(n){return n===t.type&&n!==e.mark.type}))})).filter((function(t){return t.to>f})).length)return null;l<r.to&&a.delete(l,r.to),f>r.from&&a.delete(r.from+d,f),c=r.from+d+s.length,a.addMark(r.from+d,c,t.type.create(i||{})),a.removeStoredMark(t.type)}}})}function $e(t){return J(t)&&t instanceof l.qv}function Ie(t,e,n){var r=t.state.doc.content.size,o=Q(e,0,r),i=Q(n,0,r),a=t.coordsAtPos(o),s=t.coordsAtPos(i,-1),u=Math.min(a.top,s.top),c=Math.max(a.bottom,s.bottom),d=Math.min(a.left,s.left),f=Math.max(a.right,s.right),l={top:u,bottom:c,left:d,right:f,width:f-d,height:c-u,x:d,y:u};return _(_({},l),{},{toJSON:function(){return l}})}}}]);
//# sourceMappingURL=bc48b0ec-499b7d74f321eb9cf251.js.map